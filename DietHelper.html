<html>
<head>
<title>Diet Helper</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script>

// --------------------
const globalDebug = 0;
// --------------------

var activeLanguage = "";  	// .it , .en
var activeValue = ""; 		// one of listedValues[] 

const listedValues = ["kcal", "fats", "carb", "prot", "fibr"]; //salt
const listValNames = {
				 it: ["kCal", "Gras", "Carb", "Prot", "Fibr"], //sale
				 en: ["kCal", "Fats", "Carb", "Prot", "Fibe"], //salt
}

const RDA = {
	kcal: 2000,
	fats: 70,
	carb: 260,
	prot: 50,
	fibr: 0,		// not regulated
	//salt: 6,
}

const ingredients = [ 
// ------- ORDER ----- EMPTY MUST ALWAYS BE FIRST, others in alphabetical order

//  List_Name, List_Tooltip,
//  	kcal, 	fats, 	carb, 	prot, 	fibr,	salt
	["", "", 
		0, 		0, 		0, 		0, 		0,		0], 
	["Albicocche essiccate reidratate Ventura", "",
		254,	0.5,	55,		3.4,	7.3],
	["Bevanda mandorla bio Coop", "",
		26,		1.2,	3.3,	0,		0],
	["Bevanda riso Coop", "",
		61,		1.1,	13,		0,		0],	
	["Coca cola", "",
		42,		0,		10.6,	0,		0],
	["Crostino dorato buitoni", "2 fette = 11g",
		417,	7.2,	74.2,	11.6,	4.7,	1],
	["Crostino integrale buitoni", "2 fette = 11g",
		416,	8.5,	69,		12.2,	7.4,	1.08],
	["Dado classico Star", "(1/2 dado = 5g)",	
		257,	20,		2.1,	17,		0.2,	58.8],
	["Dado vegetale Knorr", "(1/2 dado = 5g)",	
		165,	8.8,	19.8,	5,		5,		16.5],
	["Gall. riso Coop", "3 gallette = 25g",
		377,	1.7,	81,		7.5,	3.9],
	["Juice+ cioccolato", "1 dose = 38g",
		371,	6.9,	41,		26.9,	18],
	["Juice+ vaniglia", "1 dose = 38g",
		375,	6.4,	46,		25.3,	15],
	["Latte", "",
		48],
	["Latte mandorla Condorelli", "",
		89,		3.9,	11.9,	1.5,	0],
	["Latte Zymil 'buono' Parmalat", "",
		41,		1,		4.9,	3.2,	0],		
	["M&amp;M's noccioline", "1 porzione = 33g",
		511,	25.3,	59.2,	9.7,	0],
	["Mayonese Calve classica", "1 porzione = 15ml",
		614,	68,		0.6,	0.8,	0.5,	1.1],
	["Mikado Lu", "",
		485,	20,		70,		6.1,	1.8],
	["Pansoti del Levante past. il Ponte", "1 porzione = 200g",
		228,	4.2,	37.5,	7.7,	4.7,	0.9],
	["Parmigiano Reggiano Ferrari", "",
		402,	30,		0,		32,		0],
	["Philadelphia classic", "1 porzione = 30g",
		267,	26,		2.8,	4.1,	0.2,	0.75],
	["Pistacchi tostati bio Carrefour", "",
		631,	56,		81,		18,		11],
	["Polpo", "1 porziion3 = 300g",
		57,		1,		1.4,	10.6,	0,		0.57],
	["Salsa di noci Past. il Ponte", "",
		541,	54.3,	4.5,	11.3,	0],
	["Scamorza affumicata Coop", "",
		290,	22,		1.0,	22,		0,		1],
	["Seven-up", "",
		29,		0,		7,		0,		0,		0.03],
	["Succo Derby blue Albicocca", "1 brick = 125ml",
		62,		0,		14.6,	0.2,	0.6],
	["Taglierini all'uovo Novella", "1 porzione = 200g",
		271,	0.8,	56,		9.0,	0],
	["Togo classic latte Pavesi", "",
		509,	25,		62.7,	6.7,	3.2],
	["Veg crock carote Noberasco", "1 pacchetto =  15g",
		333,	1.7,	63,		4.8,	23,		0.65],
	["Yogurt Muller bianco zero", "",
		67,		0,		10.8,	5.6,	0,		0.17],

			
];


function getValue(name) { return document.getElementById(name).textContent; }

function setValue(name, value) { return document.getElementById(name).innerHTML = value; }	
	
function show(name) { document.getElementById(name).classList.remove("hidden"); }

function hide(name) { document.getElementById(name).classList.add("hidden"); }

function setLang(newLanguage) {

	if (newLanguage === activeLanguage) { return }
		
	document.querySelectorAll(".lang"          ).forEach(function(el){el.classList.add("hidden")});
	document.querySelectorAll("." + newLanguage).forEach(function(el){el.classList.remove("hidden")});
	activeLanguage = newLanguage;
	return
}

function buildHeaders() {

	let summary_cont = document.getElementById("summary_container");
	let dayvals_cont = document.getElementById("dayvals_container");
	let divs = [];
	
	
	let sVal  = 0;
	let sTags = [];
	let dayVals  = [];
	let mealVals = [];
	
	let mealHeaders = document.querySelectorAll(".meal_header");
	
	
	// main app header ----------------------------------------------
	
	// el = kcal, carb ....
	// i  = 0, 1 ....
	listedValues.forEach( 
		function(el, i) {
		
		// header SELECTORS -----------------------------------------
			sVal  = 0;
			sTags = [];
			mealVals = [];
			
					
			divs[i] = document.createElement("div");
			divs[i].setAttribute("class", "day_summary smallFont");
			divs[i].setAttribute("id", "summ_" + el);
			divs[i].setAttribute("onclick", "selectValue(document, '" + el + "')");
		
			summary_cont.appendChild(divs[i]);
			
			sVal = document.createElement("span");
			sVal.setAttribute("class", "summ_value unselectable");
			sVal.setAttribute("id", "summ_value_" + el);
			sVal.textContent = "0%";
		
			divs[i].appendChild(sVal);
		
			Object.keys(listValNames).forEach(
				function(el, j){
					
					sTags[j] = document.createElement("span");
					sTags[j].setAttribute("class", "unselectable lang " + el);
					sTags[j].textContent = listValNames[el][i];
					
					divs[i].appendChild(sTags[j]);					
				}
			);
		// end header SELECTORS -------------------------------------

		// header VALUES --------------------------------------------		
		
			dayVals[i] = document.createElement("div");
			dayVals[i].setAttribute("class", "unselectable autoCell day_vals");
			dayVals[i].setAttribute("id", "day_" + el);
			
			dayvals_cont.appendChild(dayVals[i]);
			
		// end header VALUES ----------------------------------------				
		}
	)
	// end main app header ------------------------------------------
	
	
	
	// single meals headers -----------------------------------------
	
	mealHeaders.forEach(
		function( node ) {
			
			mealVals = [];
			
			listedValues.forEach( 
				function( val, i ) {
					
					mealVals[i] = document.createElement("div");
					mealVals[i].setAttribute("class", "autoCell unselectable meal_" + val);
					mealVals[i].textContent = 0;
					
					node.appendChild(mealVals[i]);
					
				}
			)
		
		
		}
	)

	// end single meals headers -------------------------------------

}

function findAncestorByClass(node, targetClass) {
	if (node == document) {
		alert("Error! Ancestor not found in findAncestorByClass");
		return 0;
	}
	
	if ( node.classList.contains(targetClass) ) {
		return node;
	} else {
		return findAncestorByClass(node.parentNode, targetClass)
	}

}

// reads ingredients list, appends all ingredients as options to dropdown menu
function buildList(source) {
	let select = document.createElement("select");
 
	for (let i=0; i<source.length; i++) {
		let option = document.createElement("option"); 
		option.innerHTML = source[i][0];
		option.setAttribute("value", i);
		select.appendChild(option);
	}

	return select
}

function addLine(meal) {

	let uVals = []; 	// unitary values
	let iVals = [];		// calculated ingredient values (on chosen qty)

	let parent = document.getElementById(meal);
	
	let line = document.createElement("div");
		line.setAttribute("class", "ingredient");
	
	let select = buildList(ingredients);
		select.setAttribute("class", "smallFont");
		select.setAttribute("onchange", "setIngredientProperties()");
	
	let iMass = document.createElement("input");
		iMass.setAttribute("class", "item_mass unselectable");
		iMass.setAttribute("type", "tel");	
		iMass.setAttribute("onkeyup", "userInput()");		
		
	let times = document.createElement("span");
		times.setAttribute("class", "smallFont unselectable");	
		times.textContent = "x";
	
//unitary and item values -------------------------------------	
	
	listedValues.forEach( function(el, i){
		uVals[i] = document.createElement("div");
		uVals[i].setAttribute("class", "unit_"+ el + " autoCell unselectable smallFont");
		uVals[i].textContent = 0;	
		
		iVals[i] = document.createElement("div");
		iVals[i].setAttribute("class", "item_"+ el + " autoCell unselectable");
		iVals[i].textContent = 0;
	});

// end unitary values --------------------------------
		
	let equal = document.createElement("span");
		equal.setAttribute("class", "smallFont unselectable");	
		equal.textContent = "=";
	
	let enable = document.createElement("button");
		enable.setAttribute("class", "minus smallFont unselectable");
		enable.setAttribute("onclick", "enableDelete()");
		enable.textContent = "x";
	
	let remove = document.createElement("button");
		remove.setAttribute("class"  , "delete smallFont unselectable hidden");
		remove.setAttribute("onclick", "deleteRow()");
		remove.setAttribute("onblur" , "clearDelete()");		
		remove.textContent = "x";
	
	parent.appendChild(line);
		line.appendChild(select);
		line.appendChild(iMass);
		line.appendChild(times);
		
		for(ind in uVals) { line.appendChild(uVals[ind]) }
		
		line.appendChild(equal);
		
		for(ind in iVals) { line.appendChild(iVals[ind]) }
		
		line.appendChild(enable);		
		line.appendChild(remove);
	
	selectValue(line, activeValue);
}

function enableDelete(){

	let caller = event.currentTarget;             // .minus button
	let row    = caller.parentNode;               // .ingredient
	let depend = row.querySelector(".delete")     // .delete button
	
	
	caller.removeAttribute("onclick");
	
	setTimeout(function(){
		caller.classList.toggle("hidden");
		depend.classList.toggle("hidden");
		depend.focus();
	},100);
}

function clearDelete(){

	let caller = event.currentTarget;             // .delete button
	let row    = caller.parentNode;               // .ingredient
	let depend = row.querySelector(".minus")      // .minus button
	
	caller.classList.toggle("hidden");
	depend.classList.toggle("hidden");
	depend.setAttribute("onclick", "enableDelete()");
}

function deleteRow() {
	
	let caller = event.currentTarget;
	let meal   = findAncestorByClass(caller, "meal_group"); 
	let riga   = caller.parentNode;
	riga.parentNode.removeChild(riga);
	
	calculateMeal(meal);
}

function selectValue(scope, value) {

	if (value == activeValue && scope == document) { return };

	scope.querySelectorAll(".autoCell")
		.forEach(function(el){el.classList.add("hidden")});
		
	scope.querySelectorAll(".unit_" + value)
		.forEach(function(el){el.classList.remove("hidden")});
	scope.querySelectorAll(".item_" + value)
		.forEach(function(el){el.classList.remove("hidden")});
	scope.querySelectorAll(".meal_" + value)
		.forEach(function(el){el.classList.remove("hidden")});
		
	activeValue = value;
	
	if (scope == document) {
	
		scope.querySelectorAll(".day_summary")
			.forEach(function(el){el.classList.remove("active")});
		
		scope.getElementById("summ_" + value).classList.add(   "active");
		scope.getElementById("day_"  + value).classList.remove("hidden");
		
	}
	
	return
}

function toggleBlock() {

	let caller = event.currentTarget;
	//console.log(caller);
	
	let block  = caller.parentNode.querySelector(".meal_block");
	//console.log(block);
	
	block.classList.toggle("hidden") ;
	event.currentTarget.querySelector(".arrow").classList.toggle("up");

}

function setIngredientProperties() {

	let caller     = event.currentTarget;

	let chosenIngr = caller.value;
	let activeRow  = caller.parentNode;
	
	let baseKcal   = activeRow.querySelector(".unit_kcal");
	let baseFats   = activeRow.querySelector(".unit_fats");
	let baseCarb   = activeRow.querySelector(".unit_carb");
	let baseProt   = activeRow.querySelector(".unit_prot");
	let baseFibr   = activeRow.querySelector(".unit_fibr");
	
	
	baseKcal.textContent = ingredients[chosenIngr][2] || 0;
	baseFats.textContent = ingredients[chosenIngr][3] || 0;
	baseCarb.textContent = ingredients[chosenIngr][4] || 0;
	baseProt.textContent = ingredients[chosenIngr][5] || 0;
	baseFibr.textContent = ingredients[chosenIngr][6] || 0;
	
	ingredients[chosenIngr][1] 
		? setValue("footer", "<b>" + ingredients[chosenIngr][0] + ":</b> " + ingredients[chosenIngr][1])
		: setValue("footer", "");
	
	
	calculateIngredient(caller);
}

function userInput() {

	let caller = event.currentTarget;
	caller.focus();
	
	let temp = parseInt(caller.value);
	
	caller.value = isNaN(temp) ? 0 : temp;
	
	calculateIngredient(caller);
	
	caller.addEventListener("keydown", function(event) {
		if (event.key === "Enter") {
			caller.blur();
		}
	});
}



function setMass() {
	
	let caller = event.currentTarget;
	let meal   = findAncestorByClass(caller, "meal_group");
	
	let value;
	let userInput = parseInt(prompt("Quantita':", ""), 10);
	
	userInput 
		? value = userInput
		: value = 0;
	
	caller.textContent = value;
	
	
	calculateIngredient(caller);
	
}

function calculateIngredient(eventCaller) {
	
	let caller;
	let meal; 
	
	let itemMass_id;
	let mass;
	
	let uVals_id	= [];
	let iVals_id	= [];
	let uVals		= [];
	let iVals		= [];
	
	console.log(eventCaller);
	
	eventCaller 
		? caller = eventCaller
		: caller = event.currentTarget;

	console.log(caller);
	meal = findAncestorByClass(caller, "meal_group");
		
	itemMass_id = caller.parentNode.querySelector(".item_mass");
	mass = itemMass_id.value;
	
	listedValues.forEach(
		function(el, i) {
			uVals_id[i] = caller.parentNode.querySelector(".unit_" + el);
			iVals_id[i] = caller.parentNode.querySelector(".item_" + el);
		
			uVals[i] = uVals_id[i].textContent;
		
			iVals_id[i].textContent = Math.round(mass * uVals[i] / 100);
		}
	);
	
	calculateMeal(meal);
}


function calculateMeal(meal){

	let mealId;
	let mealValuesList = [];
	let mealValuesTot = [];
	
	meal 
		? mealId = meal
		: mealId = findAncestorByClass(caller, "meal_group");


	listedValues.forEach(
		function ( tag, i ) {

			mealValuesList[i] = mealId.querySelectorAll(".item_" + tag)
			mealValuesTot[i]  = 0;
			
			mealValuesList[i].forEach(
				function(el){
					mealValuesTot[i] += parseInt(el.textContent, 10);
				}
			);
			
			mealId.querySelector(".meal_" + tag).textContent = mealValuesTot[i];

		
		}
	);
	
	
	
	calculateDay();
}

function calculateDay() {
	let allMealsList  = [];
	let allMealsValue = [];

	
	listedValues.forEach(
		function ( tag, i ) {
		
			allMealsList[i]  = document.querySelectorAll(".meal_" + tag);
			
			allMealsValue[i] = 0;
			
			allMealsList[i].forEach(
				function(el){
					allMealsValue[i] += parseInt(el.textContent, 10);
				}
			);	
			
			setValue("day_" + tag, allMealsValue[i]);
			
			
			if ( RDA[tag] ) {
			
				setValue("summ_value_" + tag, parseInt( 100 * allMealsValue[i] / RDA[tag] , 10) + "%");
			
			} else {
			
				setValue("summ_value_" + tag, "----");
			
			}
			
			

			
			
			
			
			
		}
	)
}


window.onload = function(){

	buildHeaders();
	selectValue(document, "kcal");
	addLine("breakfast_list");
	addLine("snack1_list");
	addLine("lunch_list");
	addLine("snack2_list");
	addLine("dinner_list");
	setLang("it");
};

</script>

<style>
html {
	font-size: 16px;
}
@media (min-width: 600px) { html {font-size: 24px;} }


.smallFont {
	font-size: 0.75rem;
}

.smallestFont {
	font-size: 12px;
}

.fullWidth {
	width:100%;
	/*max-width: 25rem;	*/
}
@media (min-width: 800px) { .fullWidth {max-width: 35rem;} }


body {
	background-color: #666666;
	margin: 0px;
	padding: 0px;
	font-family: arial;
}

#container {
	box-sizing: border-box;
	padding: 0.25rem;
	border-bottom: 3px solid black;
	position: fixed;
	top: 0px;
	bottom: 3rem;
	overflow-y: scroll;
}

#footer {
	box-sizing: border-box;
	padding: 0.25rem;
	position: fixed;
	bottom: 0px;
	height: 3rem;
	overflow: hidden;
	background-color: #ccccff;
}

#menuInfo {
	/*margin-left:  0.25rem;*/
	margin-right: 0.5rem;
	height:       1.5rem;
	width:        1.5rem;
	border: 1px solid black;
	border-radius: 0.75rem;
	background-color: #5050ff;
	fill: white;
	display: flex;
}

#iconInfo{
	height: 1rem;
	width:  1rem;
	margin: auto;
}

.meal_group {
}

.meal_header, #app_header {
	font-weight: bold;
	display:flex;
	align-items: center;
	border: 2px solid black;
	border-radius: 2rem;
	margin-top: 0.5rem;
	margin-bottom: 0.5rem;
	background-color: #fffff0;
}

.meal_header {
	margin-right: 2rem;
	height: 2rem;
}

#app_header {
	height: 2.5rem;
}

#app_header, #app_name {
	font-variant: small-caps;
}

.meal_name {
	display: inline-block;
	margin-left: 1rem;
	margin-right: 1rem;
	width: 4rem;
	flex-grow: 1;
}

#app_name {
	margin-left:  1rem;
	margin-right: 1rem;
	font-size: larger;
	font-style: italic;
	font-weight: bold;
	color: #ffffaa;
}



.arrow {
	width:  1.2em;
	height: 0.7em;
}

.up {
    -ms-transform: rotate(180deg); /* IE 9 */
    -webkit-transform: rotate(180deg); /* Safari */
    transform: rotate(180deg);
}

.ingredient {
	margin-top: 0.5rem;
	margin-bottom: 0.5rem;
	margin-left: 0.5rem;
	height:2em;
	display:flex;
	align-items: center;
}

select {
	flex-grow: 1;
	box-sizing: border-box;
	display: inline-block;
	height: 2em;
	width: 4em;
	margin-left: 0.5em;
	margin-right: 0.5em;
}

.item_mass, .autoCell {
	box-sizing:border-box;
	display: flex;
	width: 3rem;
	height: 1.5rem;
	padding-left:  2px;
	padding-right: 2px;
	border-width: 1px;
	border-style: solid; 
	border-radius: 1rem;
	justify-content: flex-end;
	align-items: center;
	overflow: hidden;
}

.item_mass, .autoCell {
	margin-left: 0.25rem;
	margin-right:0.25rem;
}

.item_mass {
	font-size: 1rem;
}

.day_summary {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	text-align: center;
	width:3rem;
	margin: auto 0.1rem;
	box-sizing: border-box;
	border-width: 1px;
	border-color: gray;
	border-style: solid;
	border-radius: 0.5rem;
}

.day_summary.active {
	border-width:3px;
	border-color: black;
}

#summary_container {
	width: 1px;
	flex-grow: 1;
	display: flex;
	justify-content: space-evenly;
	align-items: center;
	margin-left: 0.25rem;
	margin-right: 0.25rem;
}

#dayvals_container {
	display: flex;
	align-items: center;
}


.item_mass, select {
	background-color: #ffffaa;
}

.autoCell {
	background-color: #cccccc;
}

.item_mass, .autoCell {
	border-color: black;
}

button {
	box-sizing: border-box; 
	border-width:2px;
	border-style: solid;

	padding:0px;
	text-align:center;
	-webkit-appearance: none;
	-moz-appearance: none;
	appearance: none;
}
	
.plus {
	border-color: green;
	border-radius: 0.75em;
	height: 1.5em;
	width:  4rem;
	margin-left: 4rem;
	background-color: #aaffaa;
}

.minus, .delete {
	border-color: red;
	border-radius: 50%;
	color: red;
}

.minus {
	height: 1rem;
	width:  1rem;
	margin-right: 0.5rem;
	margin-left:  0.5rem;
	background-color: #ffaaaa;
	color: red;
}

.delete {
	height: 1.5rem;
	width:  1.5rem;
	margin-right: 0.25rem;
	margin-left:  0.25rem;
	background-color: #ff0000;
	color: white;
}

.hidden {
	display: none               !important;
}

.vertCenter {
	margin-top: auto;
	margin-bottom:auto;
}

.deleteRowIcon {
	height: 1.5em;
	width: 1.5em;
}

.arrow {
	width:  1.2em;
	height: 0.7em;
}

.up {
    -ms-transform: rotate(180deg); /* IE 9 */
    -webkit-transform: rotate(180deg); /* Safari */
    transform: rotate(180deg);
}

.unselectable {
	user-select: none;
	-moz-user-select: none;
	-webkit-user-select: none;
	-ms-user-select: none;
}


#infoFrame {
	display: flex;
	position: fixed;
	z-index: 1000;
	top: 0px;
	bottom: 0px;
	left: 0px;
	background-color: #000000b0;
}

#infoBox {
	display: block;
	position: absolute;
	top: 2rem;
	bottom: 6rem;
	left: 2rem;
	right: 2rem;
	background-color: #cccccc;
	overflow-y: auto;
	padding:5px;
}

#languagebox {
	display: flex;
	height: 4 rem;
	justify-content: space-evenly;
	align-items: center;
}

.flags {
	height: 3rem;
	width: 3rem;
	box-sizing: border-box;
	border: 2px solid black;
	border-radius: 1.5rem;
}



#backSign {
	position: absolute;
	display: flex;
	align-items: center;
	justify-content: center;
	bottom: 2rem;
	left: 4rem;
	right: 4rem;
	margin: auto;
	box-sizing: border-box;
	height: 2rem;
	border: 2px solid red;
	border-radius: 1rem;
	background-color: #ffcccc;
}

#donate {
	width:  3rem;
	height: 3rem;
	background-color: lightgreen;
	border: 1px solid black;
	border-radius: 1rem;
}

#hand {
	fill: pink;
	stroke: brown;
	stroke-linejoin: round;
	stroke-width: 2px;	
}

#coin {
	fill: gold;
	stroke: darkgoldenrod;
	stroke-linejoin: round;
	stroke-width: 1.5px;
}



</style>


</head>


<body>


<div class="fullWidth" id="container">
	<div class="unselectable" id="app_name">Diet Helper</div>
	
	<div id="app_header">
		<div id="summary_container"></div>
		
		<div id="dayvals_container"></div>
		
<!--		
		<div class="unselectable day_vals" id="day_kcal"></div>
		<div class="unselectable day_vals" id="day_fats"></div>
		<div class="unselectable day_vals" id="day_carb"></div>
		<div class="unselectable day_vals" id="day_prot"></div>
		<div class="unselectable day_vals" id="day_fibr"></div>
-->
		
		<div id="menuInfo" onclick="show('infoFrame')">
			<svg xmlns="http://www.w3.org/2000/svg" id="iconInfo" viewBox="0 0 1024 1024">
				<path d="m640.8 12.64c40.68-5.326 85.35 9.973 106.5 47.33 28.91 51.11 12.97 122.6-40.87 156.7-41.97 26.63-98.75 28.74-137.6 0.9018-33.6-23.9-45.5-73.5-33.7-115.1 13.7-48 56.6-83.33 105.7-89.76zm23.7 330.9c22.1 55.7-5.4 119.8-25.3 174.7-35.6 97.2-104.8 279-116.7 315.4-13.7 41.6-0.4 59.4 26.3 48.8 45.6-18.5 96-98.6 131.2-124 14.4-10.4 30 13.6 23.1 29.6-27.9 64.8-138.5 161.5-225.5 199.2-48 20.8-111.2 35.8-157.3 14.8-38.9-17.5-45.9-60.9-40.4-97.4 16.3-107.1 64.7-205.3 102.8-305.6 22.03-58 64.68-156.2 68-173.3 6.1-31.3-16.2-39.1-41.1-25.7-50.4 27.2-98.4 106-125.6 123.2-15.3 9.7-31.3-7.1-28-20.8 8-33.6 84-106.4 112-129.6 74.4-61.6 140.7-75.3 187.3-79.51 41.41-3.781 92.42 7.921 109.2 50.21z"/>
			</svg>
		</div>
		

	</div>

<!-- BREAKFAST -->
	<div class="meal_group" id="breakfast_group">
		<div class="meal_header" onclick="toggleBlock()">
			<div class="meal_name unselectable">
				<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="arrow up" x="0px" y="0px" viewBox="0 0 960 560" enable-background="new 0 0 960 560" xml:space="preserve">
					<path d="M480,344.181L268.869,131.889c-15.756-15.859-41.3-15.859-57.054,0c-15.754,15.857-15.754,41.57,0,57.431l237.632,238.937   c8.395,8.451,19.562,12.254,30.553,11.698c10.993,0.556,22.159-3.247,30.555-11.698l237.631-238.937   c15.756-15.86,15.756-41.571,0-57.431s-41.299-15.859-57.051,0L480,344.181z"/>
				</svg>
				<span class="lang it">Colazione</span>
				<span class="lang en">Breakfast</span>
			</div>
		</div>

		<div class="meal_block" id="breakfast_block">
			<div id="breakfast_list"></div>
			<button class="plus unselectable smallFont" onclick="addLine('breakfast_list')">+</button>
		</div>
	</div>

	
<!-- SNACK (MORNING)-->
	<div class="meal_group" id="snack1_group">
		<div class="meal_header" onclick="toggleBlock()">
			<div class="meal_name unselectable">
				<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="arrow up" x="0px" y="0px" viewBox="0 0 960 560" enable-background="new 0 0 960 560" xml:space="preserve">
					<path d="M480,344.181L268.869,131.889c-15.756-15.859-41.3-15.859-57.054,0c-15.754,15.857-15.754,41.57,0,57.431l237.632,238.937   c8.395,8.451,19.562,12.254,30.553,11.698c10.993,0.556,22.159-3.247,30.555-11.698l237.631-238.937   c15.756-15.86,15.756-41.571,0-57.431s-41.299-15.859-57.051,0L480,344.181z"/>
				</svg>
				<span class="lang it">Spuntino 1</span>
				<span class="lang en">Snack 1</span>
			</div>
		</div>

		<div class="meal_block" id="snack1_block">
			<div id="snack1_list"></div>
			<button class="plus unselectable smallFont" onclick="addLine('snack1_list')">+</button>
		</div>
	</div>
	

<!-- LUNCH -->	
	<div class="meal_group" id="lunch_group">
		<div class="meal_header" onclick="toggleBlock()">
			<div class="meal_name unselectable">
				<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="arrow up" x="0px" y="0px" viewBox="0 0 960 560" enable-background="new 0 0 960 560" xml:space="preserve">
					<path d="M480,344.181L268.869,131.889c-15.756-15.859-41.3-15.859-57.054,0c-15.754,15.857-15.754,41.57,0,57.431l237.632,238.937   c8.395,8.451,19.562,12.254,30.553,11.698c10.993,0.556,22.159-3.247,30.555-11.698l237.631-238.937   c15.756-15.86,15.756-41.571,0-57.431s-41.299-15.859-57.051,0L480,344.181z"/>
				</svg>
				<span class="lang it">Pranzo</span>
				<span class="lang en">Lunch</span>
			</div>
		</div>

		<div class="meal_block" id="lunch_block">
			<div id="lunch_list"></div>
			<button class="plus unselectable smallFont" onclick="addLine('lunch_list')">+</button>
		</div>
	</div>
	

<!-- SNACK (AFTERNOON)-->	
	<div class="meal_group" id="snack2_group">
		<div class="meal_header" onclick="toggleBlock()">
			<div class="meal_name unselectable">
				<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="arrow up" x="0px" y="0px" viewBox="0 0 960 560" enable-background="new 0 0 960 560" xml:space="preserve">
					<path d="M480,344.181L268.869,131.889c-15.756-15.859-41.3-15.859-57.054,0c-15.754,15.857-15.754,41.57,0,57.431l237.632,238.937   c8.395,8.451,19.562,12.254,30.553,11.698c10.993,0.556,22.159-3.247,30.555-11.698l237.631-238.937   c15.756-15.86,15.756-41.571,0-57.431s-41.299-15.859-57.051,0L480,344.181z"/>
				</svg>
				<span class="lang it">Spuntino 2</span>
				<span class="lang en">Snack 2</span>
			</div>
		</div>

		<div class="meal_block" id="snack2_block">
			<div id="snack2_list"></div>
			<button class="plus unselectable smallFont" onclick="addLine('snack2_list')">+</button>
		</div>
	</div>
	

<!-- DINNER-->	
	<div class="meal_group" id="dinner_group">
		<div class="meal_header" onclick="toggleBlock()">
			<div class="meal_name unselectable">
				<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="arrow up" x="0px" y="0px" viewBox="0 0 960 560" enable-background="new 0 0 960 560" xml:space="preserve">
					<path d="M480,344.181L268.869,131.889c-15.756-15.859-41.3-15.859-57.054,0c-15.754,15.857-15.754,41.57,0,57.431l237.632,238.937   c8.395,8.451,19.562,12.254,30.553,11.698c10.993,0.556,22.159-3.247,30.555-11.698l237.631-238.937   c15.756-15.86,15.756-41.571,0-57.431s-41.299-15.859-57.051,0L480,344.181z"/>
				</svg>
				<span class="lang it">Cena</span>
				<span class="lang en">Dinner</span>
			</div>
		</div>

		<div class="meal_block" id="dinner_block">
			<div id="dinner_list"></div>
			<button class="plus unselectable smallFont" onclick="addLine('dinner_list')">+</button>
		</div>
	</div>
	


</div> <!-- container -->


<div class="fullWidth unselectable" id="footer"></div>



<div class="fullWidth hidden" id="infoFrame">

	<div class="unselectable" id="infoBox">
	
		<div id="languageBox">
			<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="flags" id="flagIT" onclick="setLang('it')" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
				<circle style="fill:#F0F0F0;" cx="256" cy="256" r="256"/>
				<path style="fill:#D80027;" d="M512,256c0-110.071-69.472-203.906-166.957-240.077v480.155C442.528,459.906,512,366.071,512,256z"/>
				<path style="fill:#6DA544;" d="M0,256c0,110.071,69.472,203.906,166.957,240.077V15.923C69.472,52.094,0,145.929,0,256z"/>
			</svg>
			
			<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="flags" id="flagEN" onclick="setLang('en')" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
				<circle style="fill:#F0F0F0;" cx="256" cy="256" r="256"/>
				<g>
					<path style="fill:#0052B4;" d="M52.92,100.142c-20.109,26.163-35.272,56.318-44.101,89.077h133.178L52.92,100.142z"/>
					<path style="fill:#0052B4;" d="M503.181,189.219c-8.829-32.758-23.993-62.913-44.101-89.076l-89.075,89.076H503.181z"/>
					<path style="fill:#0052B4;" d="M8.819,322.784c8.83,32.758,23.993,62.913,44.101,89.075l89.074-89.075L8.819,322.784L8.819,322.784   z"/>
					<path style="fill:#0052B4;" d="M411.858,52.921c-26.163-20.109-56.317-35.272-89.076-44.102v133.177L411.858,52.921z"/>
					<path style="fill:#0052B4;" d="M100.142,459.079c26.163,20.109,56.318,35.272,89.076,44.102V370.005L100.142,459.079z"/>
					<path style="fill:#0052B4;" d="M189.217,8.819c-32.758,8.83-62.913,23.993-89.075,44.101l89.075,89.075V8.819z"/>
					<path style="fill:#0052B4;" d="M322.783,503.181c32.758-8.83,62.913-23.993,89.075-44.101l-89.075-89.075V503.181z"/>
					<path style="fill:#0052B4;" d="M370.005,322.784l89.075,89.076c20.108-26.162,35.272-56.318,44.101-89.076H370.005z"/>
				</g>
				<g>
					<path style="fill:#D80027;" d="M509.833,222.609h-220.44h-0.001V2.167C278.461,0.744,267.317,0,256,0   c-11.319,0-22.461,0.744-33.391,2.167v220.44v0.001H2.167C0.744,233.539,0,244.683,0,256c0,11.319,0.744,22.461,2.167,33.391   h220.44h0.001v220.442C233.539,511.256,244.681,512,256,512c11.317,0,22.461-0.743,33.391-2.167v-220.44v-0.001h220.442   C511.256,278.461,512,267.319,512,256C512,244.683,511.256,233.539,509.833,222.609z"/>
					<path style="fill:#D80027;" d="M322.783,322.784L322.783,322.784L437.019,437.02c5.254-5.252,10.266-10.743,15.048-16.435   l-97.802-97.802h-31.482V322.784z"/>
					<path style="fill:#D80027;" d="M189.217,322.784h-0.002L74.98,437.019c5.252,5.254,10.743,10.266,16.435,15.048l97.802-97.804   V322.784z"/>
					<path style="fill:#D80027;" d="M189.217,189.219v-0.002L74.981,74.98c-5.254,5.252-10.266,10.743-15.048,16.435l97.803,97.803   H189.217z"/>
					<path style="fill:#D80027;" d="M322.783,189.219L322.783,189.219L437.02,74.981c-5.252-5.254-10.743-10.266-16.435-15.047   l-97.802,97.803V189.219z"/>
				</g>
			</svg>
			
		</div>
	
		<p>
			<span class="lang it">
				Questo programma serve a calcolare i valori nutrizionali consumati in un giorno e pu&ograve; funzionare sia come consuntivo di ci&ograve; che si &egrave; consumato, sia come preventivo di ci&ograve; che si intende consumare.
			</span>
			<span class="lang en">
				This tool helps evaluate the nutritional values assumed during a single day and can serve both as a meal planner and as an end-day evaluator.
			</span>
		</p>
		
		<p>
			<span class="lang it">
				L'utente deve selezionare per ogni pasto gli ingredienti (menu a tendina giallo) e inserire la quantit&agrave; (celletta gialla). Il programma ha un database di ingredienti con i valori nutrizionali <u>normalizzati su 100g / 100ml</u>. La quantit&agrave; &egrave; espressa in <b>grammi</b> o <b>ml</b>. A fondo pagina,	quando disponibili, ci saranno informazioni aggiuntive (es.: "1 biscotto = 20g").
			</span>
			<span class="lang en">
				The user should select, for each meal, the list of ingredients (yellow dropdown menu) and relevant quantity (yellow cell). An internal database stores all available ingredients and their nutritional values, <u>shown on a "per 100g / per 100ml" basis</u>. Ingredients quantities are to be expressed in <b>grams</b> or <b>ml</b></span>.
			</span>		
		</p>
		
		<p>
			<span class="lang it">
				Per aggiornamenti potete visitare il mio blog, che contiene anche una lista di tutti i programmi che ho sviluppato ad oggi:
			</span>
			<span class="lang en">
				You can check for updates, and also for any other programs and tools I've been working on until now, on my blog:
			</span>			
			<br/>
			<a href="https://jacmoli.wordpress.com">jacmoli.wordpress.com</a>
		</p>
		
		<p>
			<span class="lang it">
				Sviluppo programmi nel mio tempo libero, ma se avete piacere di sostenermi potete farmi una donazione su Paypal. Anche l'equivalente di un caff&egrave; &egrave; un bel riconoscimento ;-)
			</span>
			<span class="lang en">
				I code and develop this kind of tools in my spare time. If you want to help me, feel free to donate whatever you feel like on Paypal. Anything, even the equivalent of a coffee, will make myself proud and happy! ;-)
			</span>			
		
		</p>
		
		<p style="text-align:center;">
			<a href="https://paypal.me/jacmoli">
				<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="donate"  x="0px" y="0px" viewBox="-10 -5 60 60" style="enable-background:new -5 0 40.2 55;" xml:space="preserve">
					<path id="hand" d="M21.2,16c-0.5,0.1-1,0.2-1.5,0.3c-1.4,0.2-2.8,0.3-4.2,0c-0.9-0.2-1.7-0.5-2.4-1.1c0,0,0,0,0,0  c-0.3,0.5-0.6,1-1,1.5c-0.8,1.1-1.7,2-2.9,2.7c-0.5,0.3-1,0.5-1.5,0.6c0,0,0,0-0.1,0c0.1,0.3,0.3,0.5,0.4,0.8  c0.3,0.8,0.5,1.7,0.7,2.6c0,0.2,0,0.4,0.1,0.6c0,0,0,0.1-0.1,0.1c-1.1,0.6-2,1.5-2.7,2.4c-0.8,1.1-1.5,2.2-1.9,3.5  c0,0.2-0.1,0.3-0.1,0.5c-0.2-0.4-0.3-0.7-0.5-1.1c-0.9-2.2-1.7-4.5-2.4-6.8c-0.3-1.2-0.6-2.3-1-3.5c-0.2-0.6-0.1-1.2,0.1-1.8  c0.4-1,0.9-2,1.4-2.9c1.2-2.1,2.6-4.2,4-6.1C5.9,8,6.2,7.7,6.4,7.4C6.8,7,7.2,6.7,7.7,6.5c1-0.4,2.1-0.8,3.1-1.2  c2.4-0.8,4.8-1.6,7.1-2.4c1.9-0.7,3.8-1.3,5.6-2.1c0.5-0.2,1-0.5,1.5-0.7c0.1,0,0.1,0,0.2,0c0.9,0,1.8,0.2,2.7,0.3  c1.9,0.4,3.8,0.9,5.6,1.7c1.7,0.7,3.3,1.5,4.7,2.7c0.8,0.6,1.4,1.3,1.9,2.2C40.1,7,40.1,7,40.2,7c-0.4,0.4-0.8,0.7-1.2,1.1  C38.2,9,37.6,10,37.2,11c-0.8,1.6-1.4,3.3-2,5.1c-0.5,1.5-1.1,3.1-1.7,4.6c-1,2.2-2.4,4.1-4.3,5.6c-1.6,1.3-3.5,2.3-5.4,3.1  c-1,0.4-2,0.8-3.1,1.2c-0.8,0.3-1.4,0.8-2,1.3c-1.1,0.9-2.1,1.8-3.2,2.7c-0.9,0.7-2,1.4-3.1,1.7C11,36.7,9.7,36.7,8.5,36  c-1.2-0.6-2-1.5-2.4-2.8c-0.3-1-0.2-2.1,0.2-3.1c0.5-1.2,1.3-2.2,2.2-3c1.3-1.2,2.8-2.2,4.4-3c0.8-0.4,1.7-0.8,2.5-1.2  c0.1,0,0.1-0.1,0.2-0.1c1.1-1.4,2.1-2.8,3.2-4.2c0.6-0.8,1.3-1.4,1.9-2.2C20.9,16.3,21.1,16.2,21.2,16z"/>
					<path id="coin" d="M4.2,34C4.5,34.5,4.8,35,5,35.4c0.9,1.4,2.1,2.3,3.6,2.7c1.4,0.5,2.9,0.3,4.3-0.1c1.4-0.5,2.7-1.2,3.9-2.1  c0.7-0.5,1.3-1.1,1.9-1.6c0,0,0.1-0.1,0.1-0.1c0.5,0.5,0.9,1.1,1.2,1.7c0.8,1.5,1.1,3.1,1.1,4.8c-0.1,2.2-0.8,4.1-2.2,5.7  c-1.5,1.8-3.3,2.8-5.5,3.3C11.2,50.2,9,50,7,48.9c-2.5-1.3-4.1-3.4-4.8-6.2c-0.5-2.2-0.3-4.3,0.6-6.3c0.4-0.8,0.8-1.6,1.3-2.3  C4.1,34.1,4.2,34.1,4.2,34z"/>
				</svg><br/>
				<span class="smallFont">https://paypal.me/jacmoli</span>
			</a>
		</p>
		
		

		
		
		<p class="smallFont" style="text-align: center; margin-block-start: 2em; margin-block-end: 0.5em;"><b><i>
			<span class="lang it">Riconoscimenti</span>
			<span class="lang en">Acknowledgements</span>
		</i></b></p>
		
		<p class="smallFont" style="margin-block-start: 0.5em;">
			<span class="lang it">
				Pur avendo sviluppato in autonomia questo programma ci sono almeno due persone che meritano di essere ringraziate: mia moglie Elisa, per avermi (involontariamente) suggerito l'idea di fondo e per avermi lasciato programmare alla sera dopo una giornata di lavoro fuori casa, e il mio amico Simone Poggi per le dritte informatiche. Anzi, se avete bisogno di un programmatore professionale andate sul suo sito: 
			</span>
			<span class="lang en">
				Though I coded this tool on my own, I should thank at least two persons for letting this project become reality: my wife Elisa, for having given the initial input and for letting me code in the evenings even when I've been out for work all day, and my friend Simone Poggi, who gave me hints and revised some code sections. I'd suggest that if you need a professional programmer you'd better contact him on his website: 
			</span>
			<a href="http://simone-poggi.com/">http://simone-poggi.com/</a>
		</p>
		

	
	
		<p class="smallFont" style="text-align: center; margin-block-start: 2em; margin-block-end: 0.5em;"><b><i>
			<span class="lang it">Disclaimer &amp; Note legali</span>
			<span class="lang en">Disclaimer &amp; Legal</span>
		</i></b></p>
		
		<p class="smallFont" style="margin-block-start: 0.5em;">
			<b>Copyright 2018, Jacopo Molinari</b><br/><br/>
			
			<span class="lang it smallestFont">
				Si concede gratuitamente l&apos;autorizzazione, a chiunque ottenga una copia di questo software e dei file di documentazione associati (il &quot;Software&quot;), di dare opera al Software senza restrizioni, compresi senza limitazione i diritti di utilizzare, copiare, modificare, unire, pubblicare, distribuire, concedere in sublicenza ovvero vendere copie del Software, e di consentire alle persone a cui il Software &egrave; fornito di fare altrettanto, posto che siano rispettate le seguenti condizioni:<br/><br/>

				<b>L&apos;avviso di copyright unitamente a questo avviso di licenza devono essere sempre inclusi in tutte le copie o parti sostanziali del Software.</b><br/><br/>

				IL SOFTWARE VIENE FORNITO "COS&Igrave; COM&apos;&Egrave;" SENZA GARANZIE DI ALCUN TIPO, ESPLICITE O IMPLICITE, COMPRESE, MA NON SOLO, LE GARANZIE DI COMMERCIABILIT&Agrave;, IDONEIT&Agrave; AD UN PARTICOLARE SCOPO E NON VIOLAZIONE DI DIRITTI ALTRUI. IN NESSUN CASO GLI AUTORI DEL SOFTWARE O I TITOLARI DEL COPYRIGHT POTRANNO ESSERE RITENUTI RESPONSABILI DI RECLAMI, DANNI O ALTRE RESPONSABILIT&Agrave;, DERIVANTI DA O COLLEGATI A CONTRATTO, ILLECITO CIVILE O IN ALTRA RELAZIONE CON IL SOFTWARE O CON IL SUO UTILIZZO O CON ALTRE OPERAZIONI DEL SOFTWARE.<br/><br/>
				
				<i>
				Traduzione in italiano: CC-BY-SA steptr (https://github.com/steptr/MIT-License).<br/>
				La traduzione non &egrave; ufficiale. In caso di dispute sar&agrave; applicata la versione in inglese.
				</i>
			</span>
			<span class="lang en smallestFont">
				Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the &quot;Software&quot;), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:<br/><br/>

				<b></b>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</b><br/><br/>

				THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
			</span>
		</p>
	
	
	
	
	
	
	</div>		

	<div class="unselectable" id="backSign" onclick="hide('infoFrame')"><b>
		<span class="lang it">INDIETRO</span>
		<span class="lang en">BACK</span>
	</b></div>	

	

</div>




</body>
</html>
